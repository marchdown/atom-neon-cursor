/* This is free software, and you are welcome to redistribute it
under certain conditions; see LICENSE.md for details. */

@import "ui-variables";

@neon-cursor-color: rgb(0, 119, 255);
@neon-cursor-color-highlighted: spin(saturate(lighten(@neon-cursor-color, 15%), 100%), -10);
@neon-cursor-glow-color: rgb(75, 213, 255);

@-webkit-keyframes neon-cursor-body {
    0% {
        outline: 1px solid @neon-cursor-color-highlighted;
        box-shadow: 0 0 4px 0px @neon-cursor-color-highlighted, 0 0 4px 0px @neon-cursor-color-highlighted inset;
    }
    80% {
        outline: 1px solid @neon-cursor-color;
        box-shadow: 0 0 4px 0px fade(@neon-cursor-color-highlighted, 0%), 0 0 4px 0px fade(@neon-cursor-color-highlighted , 0%)inset;
    }
    100% {
        outline: 1px solid @neon-cursor-color;
        box-shadow: 0 0 4px 0px fade(@neon-cursor-color-highlighted, 0%), 0 0 4px 0px fade(@neon-cursor-color-highlighted , 0%)inset;
    }
}

@-webkit-keyframes neon-cursor-pulse {
    0% {
        -webkit-transform: scale(1);
        opacity: 1;
    }
    20% {
        -webkit-transform: scale(1.5);
        opacity: 0;
    }
    100% {
        -webkit-transform: scale(1.5);
        opacity: 0;
    }
}

atom-text-editor::shadow:not(.insert-mode) {
    .cursors {
        &>.cursor {
            border: none !important;
            outline: 1px solid @neon-cursor-color;
            -webkit-animation: neon-cursor-body 1s linear infinite;

            &:after {
                content: '';
                outline: 1px solid @neon-cursor-color-highlighted;
                width: 100%;
                height: 100%;
                position: absolute;
                left: 0;
                top: 0;
                transform-origin: center center;
                -webkit-animation: neon-cursor-pulse 1s linear infinite;
            }
        }

        &.blink-off {
            &>.cursor {
                opacity: 1 !important;
            }
        }
    }
}

atom-text-editor::shadow.vim-mode:not(.insert-mode) {
    .scroll-view .cursors {
        .cursor {
            background-color: inherit;
            border: 1px solid @neon-cursor-color;
            opacity: inherit;
            visibility: visible;
        }
    }
}
